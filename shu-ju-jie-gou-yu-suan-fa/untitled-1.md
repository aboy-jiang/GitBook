# 树

## 满K叉树

满K叉树数  
$$n_总=1+k^1+k^2+...+k^{i-1}+...+k^{h-1} =\frac{k^h-1}{k-1}$$  
$$n_{总}= n_0+n_分$$  
$$n_0=k^{h-1}$$  
整理得：$$n_0=(k-1)n_分 + 1$$  
  
满二叉树  
$$n_总=1+2^1+2^2+...+2^{i-1}+...+2^{h-1} =2^h-1$$  
$$n_{总}= n_0+n_分（n_分=n_2）$$  
$$n_0=2^{h-1}$$  
整理得：$$n_0=n_2 + 1$$  
注：满二叉树的$$n_1=0$$

满K叉树  
$$n_总=n_0+n_1+n_2+n_3+n_4+...$$  
$$n_总=1+n_1+2n_2+3n_3+4n_4+...$$  
二叉树  
$$n_总=n_0+n_1+n_2$$  
$$n_总=1+n_1 + 2n_2$$  
整理得：$$n_0=n_2 + 1$$  
住：普通二叉树$$n_1=0或1$$  
  
任何二叉树：$$n_0=n_2 + 1$$

## 深度h

K叉树  
$$h_{min}=\lfloor{log_k[(k-1)n]}\rfloor+1 = \lceil{log_k[(k-1)n+1]}\rceil$$  
  
二叉树  
$$h_{min}=\lfloor{log_2n}\rfloor+1 = \lceil{log_2(n+1 )}\rceil$$

## 二叉排序树

![&#x4E8C;&#x53C9;&#x6392;&#x5E8F;&#x6811;](../.gitbook/assets/image%20%2819%29.png)

### 概念

内部结点：圆形（设为n）  
外部结点：正方形  
内部路径\(IPL\)：到达某个**圆形**结点所经过的分支，形成的一条路径  
外部路径\(EPL\)：到达某个**正方形**结点所经过的分支，形成的一条路径

例子（上图）  
内部结点：10  
外部结点：11  
$$IPL_总=1*2+2*4+3*2+4*1=20$$  
$$EPL_总=3*6+4*3+5*2=40$$

### 两个等式（可用数学归纳法证明）

（1）$$正方形_总=圆形_总+1=n+1$$

（2）$$EPL_总=IPL_总+2*圆形=IPL_总+2n $$

### 比较次数

查找元素item（成功--item为圆形、失败--item为正方形）的比较次数

$$比较次数_{成功}=IPL_{某}+1$$

$$比较次数_{失败}=EPL_{某}+1$$

### ASL（Average Search Length）

定义：确定一个元素在树中的位置，所进行的比较次数的平均值

$$ASL=\frac{比较次数_总}{趟数_总}=\frac{比较次数_{成功总数}+{比较次数_{失败总数}}}{趟数_{成功总数}+{趟数_{失败总数}}}$$

$$ASL=\frac{(IPL_总+n)+{EPL_总}}{n+(n+1)}\frac{(IPL_总+n)+(IPL_总+2n)}{n+(n+1)}=\frac{2*IPL_总+3n}{2n+1}$$

### 总结

由ASL表达式可看出，n个结点的二叉树中，要使ASL最小则需IPL最小（即二叉树趋向于完全二叉树）。最佳的二叉排序树的ASL为$$O(\log_2{n})$$，最坏（单支二叉树）的ASL为$$\frac{n+1}{2}$$

